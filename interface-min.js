var knownDeals={"1,1,2,3,5,8,13,21,34,55,89,144":function(a){if(a=="(1or2)^?"){document.title=defaultTitle;return'<span class="sample">(1 or 2)^?</span> means 			&quot;deal 1 or  2 cards as many times as you like&quot;, 			so if the deck contains 4 cards then there are 5 different ways 			you can carry out this deal and be left with no cards. The number 			of different ways you can use this deal to empty a deck of 			<b>n</b> &ge; 0 cards turns out to be the <b>n</b>th 			<a href="http://en.wikipedia.org/wiki/Fibonacci_number">Fibonacci 			number</a>.'}},"0,1,1,2,3,5,8,13,21,34,55,89":function(a){if(a=="(1or2)^?1"){document.title=defaultTitle+" - A000045";return'Congratulations! You have found sequence 			<a href="http://oeis.org/A000045">A000045</a>.'}}};var noHashChangeUntil=null;function getHash(){var a=location.hash;if(a[0]=="#"){a=a.slice(1)}return decodeURIComponent(a)}function setHash(a){if(a!=getHash()){noHashChangeUntil=a;location.hash="#"+encodeURIComponent(a)}}function hashChange(){var a=getHash();if(noHashChangeUntil==null){elDeal.val(a);refreshSequence()}else{if(a==noHashChangeUntil){noHashChangeUntil=null}}}var defaultTitle="Clear the deck",minTerms=12,curInput=null,curSequence=null;function refreshSequence(){if(curInput==elDeal.val()){return}curInput=elDeal.val();try{curSequence=new Sequence(curInput)}catch(a){elStatus.text((a.i+1).toString()+"A");rejectSequence("");return}setHash(curInput);try{curSequence.build()}catch(a){elStatus.html(a.toString()+"B");rejectSequence('Your deal <a href="#0%5E0-1">does</a> 		<a href="#0%5E0-2">not</a> <a href="#0%5E0-3">make</a> 		<a href="#0%5E0-4">sense</a>!');return}elStatus.html(curSequence.machine.states.toString()+"C");elList.html("");identifySequence(listSequence())}function rejectSequence(a){curSequence=null;elList.html("");listSequence();document.title=defaultTitle;elInfo.html(a)}function identifySequence(b){var c,a,d;b=b.slice(0,minTerms).join(",");if(knownDeals.hasOwnProperty(b)){a=curSequence.identify();d=knownDeals[b](a)}if(typeof d!="string"){document.title=defaultTitle;d='Does this sequence <a href="http://oeis.org/search?q='+encodeURIComponent("signed:"+b)+'&fmt=short" title="Search the OEIS">look familiar</a>? 		Email <a href="mailto:hi@dpw.me">hi@dpw.me</a> if you know what it is.'}elInfo.html(d)}function listSequence(){var b,a=[];for(b=0;b<minTerms||elBottom.is(":in-viewport");b++){if(curSequence==null){elList.append("<li></li>")}else{a.push(curSequence.next().toString());elList.append('<li><span class="num">'+a[b]+"</span></li>")}}return a}var elDeal,elDealBorder,elStatus,elInfo,elList,elBottom;$(document).ready(function(){elDeal=$("#deal");elDealBorder=$("#deal-border");elStatus=$("#status");elInfo=$("#info");elList=$("#list");elBottom=$("#bottom");elDeal.focus(function(){elDealBorder.removeClass("unselected").addClass("selected")});elDeal.focusout(function(){elDealBorder.removeClass("selected").addClass("unselected")});elDeal.keyup(refreshSequence);elDeal.change(refreshSequence);$(window).scroll(function(){if(elBottom.is(":in-viewport")){listSequence()}});$(window).bind("hashchange",hashChange);hashChange()});